#!/bin/bash -eax

ORANGE=$HOME/cgta/orange
OPEN=$HOME/cgta/open

if [[ ! -d "$ORANGE" ]] || [[ ! -d "$OPEN" ]]; then
  echo "Unable to find orange[$ORANGE] or open[$OPEN] dir"
  exit 1
fi

proj() {
  SRC=$ORANGE/$1/src
  DEST=$OPEN/$1
  if [[ -n "$1" ]] && [[ -d "$SRC" ]]; then
    if [[ -d "$DEST" ]]; then
      rm -r $DEST
    fi
    mkdir -p $DEST/src
    cp -r $SRC $DEST
  fi
}

sbtfiles() {
  #Remove the Non O* files, build files just Open need to start with a capital O
  rm $OPEN/project/[!O]*.scala
  rm $OPEN/project/[!O]*.sbt
  #Don't copy over files that start with a capital C (for Closed)
  cp $ORANGE/project/[!C]*.sbt $OPEN/project/
  cp $ORANGE/project/[!C]*.scala $OPEN/project/
}

proj oscala
#proj serland
#proj cenum
sbtfiles



